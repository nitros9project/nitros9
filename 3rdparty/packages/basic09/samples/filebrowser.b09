PROCEDURE filebrowserDIM x,y,btn,radd,page,os:INTEGERDIM t,u,v:INTEGERDIM bm0,bm1,bm2,nl:INTEGER \ DIM pau:STRINGDIM scrx,scry,offs,attr,fldr:INTEGERDIM tfld,efld,tmp,tmp2,dirlevel:INTEGERDIM cmmd,psel,key:INTEGER \cmmd=0 \psel=0 \key=0page=194 \os=0dirlevel=0SHELL "display 1b 20 0 0 0 0 1 6 0"RUN wild("MapBlk",page,radd)ON ERROR GOTO 2000DIM name,folder,at,filepath,prevpath,temp:STRINGDIM temp2,prevfile,prevdir:STRINGfolder=""name=""at=""filepath=""prevpath=""temp="" \temp2=""prevfile=""DIM menu0,menu1:INTEGER \menu0=0 \menu1=0DIM drive:STRINGdrive="/dd"RUN wild("Color",1,6)RUN wild("Clear")RUN wild("Curoff")100 FOR t=1 TO 10 \NEXT t \RUN wild("Color",1,8)RUN wild("CurXY",0,0)RUN wild("MouseHR",x,y,btn)IF folder<>"" THEN PRINT "  CMDS   DRIVE   .. "+drive+""+folder+"/"+name+" "; at; "   X="
; x; " Y="; y; "     ";  \RUN wild("Color",1,6) \ PRINT ""ENDIF IF folder="" THEN PRINT "  CMDS   DRIVE      "+drive+""+folder+"/"+name+"  "; at; "    X="
; x; " Y="; y; "     ";  \RUN wild("Color",1,6) \ PRINT ""ENDIF IF os=0 THEN os=1GOTO 1310ENDIF IF btn=2 THEN 2500IF x>=408 AND x<=448 AND btn=1 THEN 2100IF y<9 THEN 600IF menu0=1 THEN IF y>9 THEN 900ENDIF IF menu1=1 THEN IF y>9 THEN 905ENDIF IF x>=48 AND x<=230 AND y>=24 AND y<=72 AND btn<>0 AND cmmd=1 THEN
450IF cmmd=1 AND psel<>0 THEN RUN wild("CurXY",0,17) \ PRINT "Press M to Map Page"RUN wild("Inkey",key)IF key=109 OR key=77 THEN 3000ENDIF GOTO 2200GOTO 100450 scrx=x/8 \scry=y/8pau=""IF scrx=8 OR scrx=11 OR scrx=14 THEN 100IF scrx=17 OR scrx=20 OR scrx=23 OR scrx=26 THEN 100IF scrx=7 OR scrx=10 OR scrx=13 OR scrx=16 THEN scrx=scrx-1ENDIF IF scrx=19 OR scrx=22 OR scrx=25 OR scrx=28 THEN scrx=scrx-1ENDIF offs=scry*80+scrxpau=CHR$(PEEK(radd+offs))+CHR$(PEEK(radd+offs+1))IF pau=".." THEN 100RUN wild("CurXY",0,15)PRINT "Map in Block: "; pautfld=PEEK(radd+offs) \efld=PEEK(radd+offs+1)IF tfld>=48 AND tfld<=57 THEN tfld=tfld-48ENDIF IF tfld>=65 AND tfld<=70 THEN tfld=tfld-55ENDIF IF efld>=48 AND efld<=57 THEN efld=efld-48ENDIF IF efld>=65 AND efld<=70 THEN efld=efld-55ENDIF attr=tfld*16+efldIF attr<>0 THEN psel=1ENDIF 500 GOTO 100600 IF x<48 AND btn=1 THEN 850IF x>56 AND x<=104 AND btn=1 THEN 855IF x>=138 AND x<=148 AND btn=1 THEN 2030GOTO 100850 RUN wild("CurXY",0,2)RUN wild("Color",1,8) \ PRINT "  DIR "+drive+" ";  \RUN wild
("Color",1,6) \ PRINT ""RUN wild("Color",1,8) \ PRINT "  DIR     ";  \RUN wild("Color"
,1,6) \ PRINT ""RUN wild("Color",1,8) \ PRINT "  QUIT    ";  \RUN wild("Color"
,1,6) \ PRINT ""IF name<>"" THEN RUN wild("Color",1,8) \ PRINT "  LIST    ";  \RUN wild("Color"
,1,6) \ PRINT ""RUN wild("Color",1,8) \ PRINT "  DUMP    ";  \RUN wild("Color"
,1,6) \ PRINT ""RUN wild("Color",1,8) \ PRINT "  CLEAR   ";  \RUN wild("Color"
,1,6) \ PRINT ""ENDIF menu0=1GOTO 100855 RUN wild("CurXY",11,2)RUN wild("Color",1,8) \ PRINT "  /DD      ";  \RUN wild("Color"
,1,6) \ PRINT ""RUN wild("CurXY",11,3)RUN wild("Color",1,8) \ PRINT "  /C0      ";  \RUN wild("Color"
,1,6) \ PRINT ""RUN wild("CurXY",11,4)RUN wild("Color",1,8) \ PRINT "  /S0      ";  \RUN wild("Color"
,1,6) \ PRINT ""RUN wild("CurXY",11,5)RUN wild("Color",1,8) \ PRINT "  /X0      ";  \RUN wild("Color"
,1,6) \ PRINT ""menu1=1GOTO 100860 RUN wild("CurXY",0,1) \ PRINT "" \ PRINT "" \ PRINT ""RUN wild("CurXY",0,4)SHELL "dir -e"menu0=0GOTO 100900 IF x<48 THEN 1100IF x>=56 AND x<=104 THEN 1200IF x>=256 AND x<=406 AND btn=1 THEN 910IF x>=408 AND x<=448 AND btn=1 THEN 2100GOTO 100905 IF x>=90 AND x<=132 AND y>=16 AND y<=24 AND btn=1 THEN 1610IF x>=90 AND x<=132 AND y>=25 AND y<=31 AND btn=1 THEN 1710IF x>=90 AND x<=132 AND y>=32 AND y<=40 AND btn=1 THEN 1810IF x>=90 AND x<=132 AND y>=41 AND y<=48 AND btn=1 THEN 1910IF x>=256 AND x<=406 AND btn=1 THEN 910GOTO 100910 RUN wild("CurXY",0,1) \ PRINT "" \ PRINT "" \ PRINT "" \ PRINT
""PRINT "" \ PRINT ""menu0=0menu1=0GOTO 1001000 RUN wild("CurXY",1,0)RUN wild("Color",1,6)PRINT ""1100 IF y>=23 AND y<=32 AND btn=1 THEN 1310IF y>=16 AND y<=22 AND btn=1 THEN 1410IF y>33 AND y<40 AND btn=1 THEN 1500IF y>=41 AND y<=48 AND btn=1 THEN 2300IF y>=49 AND y<=56 AND btn=1 THEN 2400IF y>=57 AND y<=64 AND btn=1 THEN 2500GOTO 1001200 IF y>=16 AND y<=22 AND btn=1 THEN 1410GOTO 1001310 RUN wild("CurXY",0,1) \ PRINT "" \ PRINT "" \ PRINT ""RUN wild("CurXY",0,4)RUN wild("Clear")cmmd=0scry=211RUN wild("Curxy",0,3)IF folder="" THEN SHELL "dir -e "+driveELSE SHELL "dir -e "+drive+""+folderENDIF menu0=0GOTO 1001410 RUN wild("CurXY",0,1) \ PRINT "" \ PRINT "" \ PRINT ""RUN wild("CurXY",0,4)cmmd=0SHELL "dir -e "+drivemenu0=0GOTO 1001500 RUN wild("CurXY",0,1) \ PRINT "" \ PRINT "" \ PRINT ""menu0=0 \RUN wild("CurOn")RUN wild("Clear")RUN wild("ClrBlk",page,radd)END 1610 drive="/DD"RUN wild("CurXY",0,1) \ PRINT "" \ PRINT "" \ PRINT "" \ PRINT
""name=""menu1=0 \ GOTO 1001710 drive="/C0"RUN wild("CurXY",0,1) \ PRINT "" \ PRINT "" \ PRINT "" \ PRINT
""name=""menu1=0 \ GOTO 1001810 drive="/S0"RUN wild("CurXY",0,1) \ PRINT "" \ PRINT "" \ PRINT "" \ PRINT
""name=""menu1=0 \ GOTO 1001910 drive="/X0"RUN wild("CurXY",0,1) \ PRINT "" \ PRINT "" \ PRINT "" \ PRINT
""name=""menu1=0 \ GOTO 1002000 errnum=ERRIF errnum=241 THEN 2010IF errnum=216 THEN 2020PRINT "Error #"; errnumEND 2010 RUN wild("CurXY",0,2)RUN wild("Color",1,8) \ PRINT "Sector Error - Drive not Available"
;  \RUN wild("Color",1,6) \ PRINT ""GOTO 1002020 RUN wild("CurXY",0,2)RUN wild("Color",1,8) \ PRINT "Pathname not Found!";  \RUN wild
("Color",1,6) \ PRINT ""GOTO 1002030 IF folder<>"" THEN folder=prevpathname=""IF dirlevel>0 THEN dirlevel=dirlevel-1ENDIF IF dirlevel=0 THEN folder=""ENDIF GOTO 1310ENDIF GOTO 1002100 scrx=x/8 \scry=y/8offs=scry*80+scrxattr=scry*80+24fldr=scry*80+51tfld=radd+fldrefld=radd+fldr+32REM print scrx,scry,CHR$(peek(radd+offs))at=CHR$(PEEK(radd+attr))IF at="-" THEN FOR i=tfld TO efldIF PEEK(i)>32 AND PEEK(i)<128 THEN temp2=temp2+CHR$(PEEK(i))ENDIF NEXT itemp2=LEFT$(temp2,LEN(temp2)-1)+CHR$(255)IF temp2="----" THEN temp2=""at=""ENDIF IF temp2=prevfile THEN name=temp2ELSE name=temp2temp2=""prevfile=nameFOR t=1 TO 750 \NEXT tGOTO 2600ENDIF ENDIF IF at="d" THEN FOR i=tfld TO efldIF PEEK(i)>32 AND PEEK(i)<128 THEN temp=temp+CHR$(PEEK(i))ENDIF NEXT itemp=LEFT$(temp,LEN(temp)-1)+CHR$(255)IF temp=prevpath THEN folder=tempELSE prevpath=folderfolder=folder+"/"+tempdirlevel=dirlevel+1temp=""name=""FOR t=1 TO 750 \NEXT tRUN wild("Clear")GOTO 1310ENDIF ENDIF IF PEEK(radd+attr)=0 THEN FOR i=tfld TO efldIF PEEK(i)>32 AND PEEK(i)<128 THEN temp=temp+CHR$(PEEK(i))ENDIF NEXT itemp=LEFT$(temp,LEN(temp)-1)+CHR$(255)IF temp=".." THEN tmp=SUBSTR("/",folder)tmp2=LEN(folder)tmp2=tmp2-tmpIF tmp=0 THEN folder=""ELSE folder=prevpathIF dirlevel>0 THEN dirlevel=dirlevel-1ENDIF IF dirlevel=0 THEN folder=""ENDIF temp=""RUN wild("Clear")GOTO 1310ENDIF prevpath=foldertemp=""ENDIF ENDIF filepath=drive+"/"+folder+"/"+nameGOTO 1002200 IF x>=204 AND x<=228 AND btn=1 THEN 2100GOTO 1002300 IF name<>"" THEN IF folder="/CMDS" THEN 2400IF folder="/SYS/BACKGROUNDS" THEN 2700IF folder="/SYS/FONTS" THEN 2800IF folder="/BASIC09" THEN 2900RUN wild("Clear")RUN wild("CurXY",0,1) \ PRINT "" \ PRINT "" \ PRINT "" \ PRINT
"" \ PRINT ""PRINT "Path="+drive+""+folder+"/"+namePRINT ""SHELL "list "+drive+""+folder+"/"+namemenu0=0ENDIF GOTO 1002400 IF name<>"" THEN RUN wild("Clear")RUN wild("CurXY",0,1) \ PRINT "" \ PRINT "" \ PRINT "" \ PRINT
""PRINT "Path="+drive+""+folder+"/"+namePRINT ""SHELL "dump "+drive+""+folder+"/"+namemenu0=0ENDIF GOTO 1002500 IF name<>"" THEN RUN wild("CurXY",0,1) \ PRINT "" \ PRINT "" \ PRINT "" \ PRINT
"" \ PRINT "" \ PRINT ""name="" \menu0=0ENDIF GOTO 1002600 IF name<>"" THEN IF folder="/CMDS" THEN RUN wild("Clear")IF name="pmap" OR name="smap" OR name="mmap" OR name="setime" OR
name="proc" OR name="procs" OR name="cputype" OR name="free" THEN
IF name="pmap" THEN cmmd=1ENDIF SHELL nameELSE SHELL "ident "+drive+"/"+folder+"/"+nameENDIF ENDIF ENDIF GOTO 1002700 IF name<>"" THEN RUN wild("CurXY",0,1) \ PRINT "" \ PRINT "" \ PRINT "" \ PRINT
"" \ PRINT "" \ PRINT ""IF SUBSTR("pixmap",name)>0 THEN nl=LEN(name)-6menu0=0RUN wild("Clear")RUN wild("Bitmap",0,0,bm0,0,0,"/DD/SYS/BACKGROUNDS/CLUT"+RIGHT$
(name,nl))RUN wild("Gon")RUN wild("BMLoad",bm0,drive+""+folder+"/"+name)INPUT "Press <Enter>",pauRUN wild("BMoff",0)RUN wild("Goff")ENDIF IF SUBSTR("clut",name)>0 THEN nl=LEN(name)-4menu0=0RUN wild("Clear")RUN wild("Bitmap",0,0,bm0,0,0,drive+""+folder+"/"+name)RUN wild("Gon")RUN wild("BMLoad",bm0,"/DD/SYS/BACKGROUNDS/pixmap"+RIGHT$(name
,nl))INPUT "Press <Enter>",pauRUN wild("BMoff",0)RUN wild("Goff")ENDIF RUN wild("Clear")ENDIF GOTO 13102800 IF name<>"" THEN RUN wild("CurXY",0,1) \ PRINT "" \ PRINT "" \ PRINT "" \ PRINT
"" \ PRINT "" \ PRINT ""menu0=0RUN wild("Clear")RUN wild("FNLoad",0,"/DD/SYS/FONTS/"+name)PRINT "" \ PRINT "Path="+drive+""+folder+"/"+name \ PRINT ""FOR t=32 TO 255PRINT CHR$(t)+"    "; NEXT tPRINT ""INPUT "Press <Enter>",pauRUN wild("Clear")RUN wild("FNLoad",0,"/DD/SYS/FONTS/BANNERFONT.SB")ENDIF GOTO 13102900 IF name<>"" THEN RUN wild("CurXY",0,1) \ PRINT "" \ PRINT "" \ PRINT "" \ PRINT
"" \ PRINT "" \ PRINT ""SHELL "basic09 "+drive+""+folder+"/"+nameRUN wild("Clear")RUN wild("CurOff")ENDIF GOTO 13103000 PRINT ""key=0psel=0RUN wild("ClrBlk",page,radd)page=attrRUN wild("MapBlk",page,radd)PRINT page,raddPRINT ""PRINT "ADDR   0  1  2  3  4  5  6  7  8  9  A  B  C  D  E  F"PRINT "-----------------------------------------------------"FOR t=$00 TO $FF STEP $10PRINT USING "H4,S2,H2,S1,H2,S1,H2,S1,H2,S1",t,"  ",PEEK(radd+t),
" ",PEEK(radd+t+1)," ",PEEK(radd+t+2)," ",PEEK(radd+t+3)," "; PRINT USING "H2,S1,H2,S1,H2,S1,H2,S1",PEEK(radd+t+4)," ",PEEK(radd
+t+5)," ",PEEK(radd+t+6)," ",PEEK(radd+t+7)," "; PRINT USING "H2,S1,H2,S1,H2,S1,H2,S1",PEEK(radd+t+8)," ",PEEK(radd
+t+9)," ",PEEK(radd+t+10)," ",PEEK(radd+t+11)," "; PRINT USING "H2,S1,H2,S1,H2,S1,H2,S2",PEEK(radd+t+12)," ",PEEK(radd
+t+13)," ",PEEK(radd+t+14)," ",PEEK(radd+t+15),"  "; FOR u=$00+t TO $15+tIF PEEK(u)>=32 AND PEEK(u)<=127 THEN PRINT CHR$(PEEK(u)); ELSE PRINT "."; ENDIF NEXT uPRINT ""NEXT tRUN wild("ClrBlk",page,radd)page=194RUN wild("MapBlk",page,radd)GOTO 100